{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/three/examples/jsm/physics/AmmoPhysics.js","webpack:///./node_modules/three/examples/jsm/libs/stats.module.js","webpack:///./src/webGl/webGl_box.js","webpack:///./node_modules/three/examples/jsm/controls/OrbitControls.js","webpack:///./node_modules/regenerator-runtime/runtime.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","async","AmmoPhysics","window","console","AmmoLib","Ammo","frameRate","collisionConfiguration","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","broadphase","btDbvtBroadphase","solver","btSequentialImpulseConstraintSolver","world","btDiscreteDynamicsWorld","setGravity","btVector3","worldTransform","btTransform","getShape","geometry","parameters","type","sx","width","sy","height","sz","depth","shape","btBoxShape","setMargin","radius","btSphereShape","meshes","meshMap","WeakMap","addMesh","mesh","mass","isInstancedMesh","handleInstancedMesh","isMesh","handleMesh","position","quaternion","transform","setIdentity","setOrigin","x","y","z","setRotation","btQuaternion","w","motionState","btDefaultMotionState","localInertia","calculateLocalInertia","rbInfo","btRigidBodyConstructionInfo","body","btRigidBody","addRigidBody","push","set","array","instanceMatrix","bodies","i","count","index","setFromOpenGLMatrix","slice","setMeshPosition","get","setAngularVelocity","setLinearVelocity","setWorldTransform","lastTime","step","time","performance","now","delta","stepSimulation","l","length","j","getMotionState","getWorldTransform","getOrigin","getRotation","compose","needsUpdate","setInterval","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","Stats","mode","container","document","createElement","addPanel","panel","appendChild","dom","showPanel","id","children","style","display","cssText","addEventListener","event","preventDefault","beginTime","Date","prevTime","frames","fpsPanel","Panel","msPanel","memory","memPanel","REVISION","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","domElement","setMode","name","fg","bg","min","Infinity","max","round","Math","PR","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","context","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","maxValue","drawImage","camera","scene","renderer","stats","physics","boxes","spheres","init","THREE","innerWidth","innerHeight","lookAt","background","hemiLight","intensity","add","dirLight","castShadow","shadow","zoom","floor","color","receiveShadow","material","matrix","geometryBox","setUsage","setPosition","random","setMatrixAt","setColorAt","setHex","geometrySphere","antialias","setPixelRatio","setSize","shadowMap","enabled","outputEncoding","querySelector","controls","OrbitControls","target","animate","requestAnimationFrame","render","_changeEvent","_startEvent","_endEvent","object","super","warn","minDistance","maxDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","zoom0","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","isFinite","makeSafe","scale","addScaledVector","panOffset","setFromSpherical","multiplyScalar","zoomChanged","distanceToSquared","EPS","dot","dispose","removeEventListener","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","code","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","pointerType","onMouseDown","onMouseMove","onMouseUp","mouseAction","focus","button","ctrlKey","metaKey","shiftKey","DOLLY_ROTATE","passive","runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","Context","_invoke","makeInvokeMethod","tryCatch","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","AsyncIterator","PromiseImpl","invoke","record","result","__await","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","iter","toString","reverse","pop","skipTempReset","prev","charAt","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function"],"mappings":"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","file":"assets/js/chunk-67d4b105.94cd94e5.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","async function AmmoPhysics() {\n\n\tif ( 'Ammo' in window === false ) {\n\n\t\tconsole.error( 'AmmoPhysics: Couldn\\'t find Ammo.js' );\n\t\treturn;\n\n\t}\n\n\tconst AmmoLib = await Ammo(); // eslint-disable-line no-undef\n\n\tconst frameRate = 60;\n\n\tconst collisionConfiguration = new AmmoLib.btDefaultCollisionConfiguration();\n\tconst dispatcher = new AmmoLib.btCollisionDispatcher( collisionConfiguration );\n\tconst broadphase = new AmmoLib.btDbvtBroadphase();\n\tconst solver = new AmmoLib.btSequentialImpulseConstraintSolver();\n\tconst world = new AmmoLib.btDiscreteDynamicsWorld( dispatcher, broadphase, solver, collisionConfiguration );\n\tworld.setGravity( new AmmoLib.btVector3( 0, - 9.8, 0 ) );\n\n\tconst worldTransform = new AmmoLib.btTransform();\n\n\t//\n\n\tfunction getShape( geometry ) {\n\n\t\tconst parameters = geometry.parameters;\n\n\t\t// TODO change type to is*\n\n\t\tif ( geometry.type === 'BoxGeometry' ) {\n\n\t\t\tconst sx = parameters.width !== undefined ? parameters.width / 2 : 0.5;\n\t\t\tconst sy = parameters.height !== undefined ? parameters.height / 2 : 0.5;\n\t\t\tconst sz = parameters.depth !== undefined ? parameters.depth / 2 : 0.5;\n\n\t\t\tconst shape = new AmmoLib.btBoxShape( new AmmoLib.btVector3( sx, sy, sz ) );\n\t\t\tshape.setMargin( 0.05 );\n\n\t\t\treturn shape;\n\n\t\t} else if ( geometry.type === 'SphereGeometry' || geometry.type === 'IcosahedronGeometry' ) {\n\n\t\t\tconst radius = parameters.radius !== undefined ? parameters.radius : 1;\n\n\t\t\tconst shape = new AmmoLib.btSphereShape( radius );\n\t\t\tshape.setMargin( 0.05 );\n\n\t\t\treturn shape;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tconst meshes = [];\n\tconst meshMap = new WeakMap();\n\n\tfunction addMesh( mesh, mass = 0 ) {\n\n\t\tconst shape = getShape( mesh.geometry );\n\n\t\tif ( shape !== null ) {\n\n\t\t\tif ( mesh.isInstancedMesh ) {\n\n\t\t\t\thandleInstancedMesh( mesh, mass, shape );\n\n\t\t\t} else if ( mesh.isMesh ) {\n\n\t\t\t\thandleMesh( mesh, mass, shape );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction handleMesh( mesh, mass, shape ) {\n\n\t\tconst position = mesh.position;\n\t\tconst quaternion = mesh.quaternion;\n\n\t\tconst transform = new AmmoLib.btTransform();\n\t\ttransform.setIdentity();\n\t\ttransform.setOrigin( new AmmoLib.btVector3( position.x, position.y, position.z ) );\n\t\ttransform.setRotation( new AmmoLib.btQuaternion( quaternion.x, quaternion.y, quaternion.z, quaternion.w ) );\n\n\t\tconst motionState = new AmmoLib.btDefaultMotionState( transform );\n\n\t\tconst localInertia = new AmmoLib.btVector3( 0, 0, 0 );\n\t\tshape.calculateLocalInertia( mass, localInertia );\n\n\t\tconst rbInfo = new AmmoLib.btRigidBodyConstructionInfo( mass, motionState, shape, localInertia );\n\n\t\tconst body = new AmmoLib.btRigidBody( rbInfo );\n\t\t// body.setFriction( 4 );\n\t\tworld.addRigidBody( body );\n\n\t\tif ( mass > 0 ) {\n\n\t\t\tmeshes.push( mesh );\n\t\t\tmeshMap.set( mesh, body );\n\n\t\t}\n\n\n\t}\n\n\tfunction handleInstancedMesh( mesh, mass, shape ) {\n\n\t\tconst array = mesh.instanceMatrix.array;\n\n\t\tconst bodies = [];\n\n\t\tfor ( let i = 0; i < mesh.count; i ++ ) {\n\n\t\t\tconst index = i * 16;\n\n\t\t\tconst transform = new AmmoLib.btTransform();\n\t\t\ttransform.setFromOpenGLMatrix( array.slice( index, index + 16 ) );\n\n\t\t\tconst motionState = new AmmoLib.btDefaultMotionState( transform );\n\n\t\t\tconst localInertia = new AmmoLib.btVector3( 0, 0, 0 );\n\t\t\tshape.calculateLocalInertia( mass, localInertia );\n\n\t\t\tconst rbInfo = new AmmoLib.btRigidBodyConstructionInfo( mass, motionState, shape, localInertia );\n\n\t\t\tconst body = new AmmoLib.btRigidBody( rbInfo );\n\t\t\tworld.addRigidBody( body );\n\n\t\t\tbodies.push( body );\n\n\t\t}\n\n\t\tif ( mass > 0 ) {\n\n\t\t\tmeshes.push( mesh );\n\n\t\t\tmeshMap.set( mesh, bodies );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction setMeshPosition( mesh, position, index = 0 ) {\n\n\t\tif ( mesh.isInstancedMesh ) {\n\n\t\t\tconst bodies = meshMap.get( mesh );\n\t\t\tconst body = bodies[ index ];\n\n\t\t\tbody.setAngularVelocity( new AmmoLib.btVector3( 0, 0, 0 ) );\n\t\t\tbody.setLinearVelocity( new AmmoLib.btVector3( 0, 0, 0 ) );\n\n\t\t\tworldTransform.setIdentity();\n\t\t\tworldTransform.setOrigin( new AmmoLib.btVector3( position.x, position.y, position.z ) );\n\t\t\tbody.setWorldTransform( worldTransform );\n\n\t\t} else if ( mesh.isMesh ) {\n\n\t\t\tconst body = meshMap.get( mesh );\n\n\t\t\tbody.setAngularVelocity( new AmmoLib.btVector3( 0, 0, 0 ) );\n\t\t\tbody.setLinearVelocity( new AmmoLib.btVector3( 0, 0, 0 ) );\n\n\t\t\tworldTransform.setIdentity();\n\t\t\tworldTransform.setOrigin( new AmmoLib.btVector3( position.x, position.y, position.z ) );\n\t\t\tbody.setWorldTransform( worldTransform );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tlet lastTime = 0;\n\n\tfunction step() {\n\n\t\tconst time = performance.now();\n\n\t\tif ( lastTime > 0 ) {\n\n\t\t\tconst delta = ( time - lastTime ) / 1000;\n\n\t\t\t// console.time( 'world.step' );\n\t\t\tworld.stepSimulation( delta, 10 );\n\t\t\t// console.timeEnd( 'world.step' );\n\n\t\t}\n\n\t\tlastTime = time;\n\n\t\t//\n\n\t\tfor ( let i = 0, l = meshes.length; i < l; i ++ ) {\n\n\t\t\tconst mesh = meshes[ i ];\n\n\t\t\tif ( mesh.isInstancedMesh ) {\n\n\t\t\t\tconst array = mesh.instanceMatrix.array;\n\t\t\t\tconst bodies = meshMap.get( mesh );\n\n\t\t\t\tfor ( let j = 0; j < bodies.length; j ++ ) {\n\n\t\t\t\t\tconst body = bodies[ j ];\n\n\t\t\t\t\tconst motionState = body.getMotionState();\n\t\t\t\t\tmotionState.getWorldTransform( worldTransform );\n\n\t\t\t\t\tconst position = worldTransform.getOrigin();\n\t\t\t\t\tconst quaternion = worldTransform.getRotation();\n\n\t\t\t\t\tcompose( position, quaternion, array, j * 16 );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.instanceMatrix.needsUpdate = true;\n\n\t\t\t} else if ( mesh.isMesh ) {\n\n\t\t\t\tconst body = meshMap.get( mesh );\n\n\t\t\t\tconst motionState = body.getMotionState();\n\t\t\t\tmotionState.getWorldTransform( worldTransform );\n\n\t\t\t\tconst position = worldTransform.getOrigin();\n\t\t\t\tconst quaternion = worldTransform.getRotation();\n\t\t\t\tmesh.position.set( position.x(), position.y(), position.z() );\n\t\t\t\tmesh.quaternion.set( quaternion.x(), quaternion.y(), quaternion.z(), quaternion.w() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// animate\n\n\tsetInterval( step, 1000 / frameRate );\n\n\treturn {\n\t\taddMesh: addMesh,\n\t\tsetMeshPosition: setMeshPosition\n\t\t// addCompoundMesh\n\t};\n\n}\n\nfunction compose( position, quaternion, array, index ) {\n\n\tconst x = quaternion.x(), y = quaternion.y(), z = quaternion.z(), w = quaternion.w();\n\tconst x2 = x + x, y2 = y + y, z2 = z + z;\n\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\tarray[ index + 0 ] = ( 1 - ( yy + zz ) );\n\tarray[ index + 1 ] = ( xy + wz );\n\tarray[ index + 2 ] = ( xz - wy );\n\tarray[ index + 3 ] = 0;\n\n\tarray[ index + 4 ] = ( xy - wz );\n\tarray[ index + 5 ] = ( 1 - ( xx + zz ) );\n\tarray[ index + 6 ] = ( yz + wx );\n\tarray[ index + 7 ] = 0;\n\n\tarray[ index + 8 ] = ( xz + wy );\n\tarray[ index + 9 ] = ( yz - wx );\n\tarray[ index + 10 ] = ( 1 - ( xx + yy ) );\n\tarray[ index + 11 ] = 0;\n\n\tarray[ index + 12 ] = position.x();\n\tarray[ index + 13 ] = position.y();\n\tarray[ index + 14 ] = position.z();\n\tarray[ index + 15 ] = 1;\n\n}\n\nexport { AmmoPhysics };\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","import * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\r\nimport { AmmoPhysics } from 'three/examples/jsm/physics/AmmoPhysics.js';\r\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\r\n\r\nlet camera, scene, renderer, stats;\r\nlet physics, position;\r\n\r\nlet boxes, spheres;\r\n\r\n// init();\r\n\r\nexport async function init() {\r\n\r\n  physics = await AmmoPhysics();\r\n  position = new THREE.Vector3();\r\n\r\n  //\r\n\r\n  camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 0.1, 100 );\r\n  camera.position.set( - 1, 1.5, 2 );\r\n  camera.lookAt( 0, 0.5, 0 );\r\n\r\n  scene = new THREE.Scene();\r\n  scene.background = new THREE.Color( 0x666666 );\r\n\r\n  const hemiLight = new THREE.HemisphereLight();\r\n  hemiLight.intensity = 0.35;\r\n  scene.add( hemiLight );\r\n\r\n  const dirLight = new THREE.DirectionalLight();\r\n  dirLight.position.set( 5, 5, 5 );\r\n  dirLight.castShadow = true;\r\n  dirLight.shadow.camera.zoom = 2;\r\n  scene.add( dirLight );\r\n\r\n  const floor = new THREE.Mesh(\r\n    new THREE.BoxGeometry( 10, 5, 10 ),\r\n    new THREE.ShadowMaterial( { color: 0x111111 } )\r\n  );\r\n  floor.position.y = - 2.5;\r\n  floor.receiveShadow = true;\r\n  scene.add( floor );\r\n  physics.addMesh( floor );\r\n\r\n  //\r\n\r\n  const material = new THREE.MeshLambertMaterial();\r\n\r\n  const matrix = new THREE.Matrix4();\r\n  const color = new THREE.Color();\r\n\r\n  // Boxes\r\n\r\n  const geometryBox = new THREE.BoxGeometry( 0.1, 0.1, 0.1 );\r\n  boxes = new THREE.InstancedMesh( geometryBox, material, 100 );\r\n  boxes.instanceMatrix.setUsage( THREE.DynamicDrawUsage ); // will be updated every frame\r\n  boxes.castShadow = true;\r\n  boxes.receiveShadow = true;\r\n  scene.add( boxes );\r\n\r\n  for ( let i = 0; i < boxes.count; i ++ ) {\r\n\r\n    matrix.setPosition( Math.random() - 0.5, Math.random() * 2, Math.random() - 0.5 );\r\n    boxes.setMatrixAt( i, matrix );\r\n    boxes.setColorAt( i, color.setHex( 0xffffff * Math.random() ) );\r\n\r\n  }\r\n\r\n  physics.addMesh( boxes, 1 );\r\n\r\n  // Spheres\r\n\r\n  const geometrySphere = new THREE.IcosahedronGeometry( 0.075, 3 );\r\n  spheres = new THREE.InstancedMesh( geometrySphere, material, 100 );\r\n  spheres.instanceMatrix.setUsage( THREE.DynamicDrawUsage ); // will be updated every frame\r\n  spheres.castShadow = true;\r\n  spheres.receiveShadow = true;\r\n  scene.add( spheres );\r\n\r\n  for ( let i = 0; i < spheres.count; i ++ ) {\r\n\r\n    matrix.setPosition( Math.random() - 0.5, Math.random() * 2, Math.random() - 0.5 );\r\n    spheres.setMatrixAt( i, matrix );\r\n    spheres.setColorAt( i, color.setHex( 0xffffff * Math.random() ) );\r\n\r\n  }\r\n\r\n  physics.addMesh( spheres, 1 );\r\n\r\n  //\r\n\r\n  renderer = new THREE.WebGLRenderer( { antialias: true } );\r\n  renderer.setPixelRatio( window.devicePixelRatio );\r\n  renderer.setSize( window.innerWidth, window.innerHeight );\r\n  renderer.shadowMap.enabled = true;\r\n  renderer.outputEncoding = THREE.sRGBEncoding;\r\n  document.querySelector('#box').appendChild( renderer.domElement );\r\n\r\n  stats = new Stats();\r\n  document.querySelector('#box').appendChild( stats.dom );\r\n\r\n  //\r\n\r\n  const controls = new OrbitControls( camera, renderer.domElement );\r\n  controls.target.y = 0.5;\r\n  controls.update();\r\n\r\n  animate();\r\n\r\n}\r\n\r\nfunction animate() {\r\n\r\n  requestAnimationFrame( animate );\r\n\r\n  //\r\n\r\n  let index = Math.floor( Math.random() * boxes.count );\r\n\r\n  position.set( 0, Math.random() + 1, 0 );\r\n  physics.setMeshPosition( boxes, position, index );\r\n\r\n  //\r\n\r\n  index = Math.floor( Math.random() * spheres.count );\r\n\r\n  position.set( 0, Math.random() + 1, 0 );\r\n  physics.setMeshPosition( spheres, position, index );\r\n\r\n  renderer.render( scene, camera );\r\n\r\n  stats.update();\r\n\r\n}","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart );\n\t\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd );\n\t\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove );\n\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\t\tlet zoomChanged = false;\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t\t// no-op\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate( event ) {\n\n\t\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan( event ) {\n\n\t\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly( event ) {\n\n\t\t\tconst dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tconst dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tconst dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t\t// no-op\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.pointerType ) {\n\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseDown( event );\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO touch\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.pointerType ) {\n\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseMove( event );\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO touch\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tswitch ( event.pointerType ) {\n\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseUp( event );\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO touch\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\t// Prevent the browser from scrolling.\n\t\t\tevent.preventDefault();\n\n\t\t\t// Manually set the focus since calling preventDefault above\n\t\t\t// prevents the browser from setting it automatically.\n\n\t\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseUp( event ) {\n\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\thandleMouseUp( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault(); // prevent scrolling\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault(); // prevent scrolling\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchEnd( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\thandleTouchEnd( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\tscope.domElement.addEventListener( 'touchstart', onTouchStart, { passive: false } );\n\t\tscope.domElement.addEventListener( 'touchend', onTouchEnd );\n\t\tscope.domElement.addEventListener( 'touchmove', onTouchMove, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\t\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\t\tthis.touches.ONE = TOUCH.PAN;\n\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n\t}\n\n}\n\nexport { OrbitControls, MapControls };\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n"],"sourceRoot":""}